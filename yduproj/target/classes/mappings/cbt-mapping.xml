<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

                        
<mapper namespace="com.ydu.biz.cbt.impl.CBTMapper"> 

	<!-- 시험 리스트 조회 : 교수 : 모두 조회 -->
	<select id="getAllCBT" resultType="map">
		SELECT  cbt_code as "cbtCode", 
				cbt_title as "cbtTitle",
        		class_title as "classTitle", 
        		name, 
        		final_date as "finalDate"
		FROM CBT_LIST c , 
			 NEW_CLASS n , 
			 CLASS_LIST l, 
			 PROFESSOR p
        WHERE c.open_class = n.open_class 
          AND n.class_code = l.class_code
          AND n.professor_code = p.professor_code
	</select>
	
	<!-- 시험 리스트 조회 : 학생 : 내가 수강한 것만 조회 -->
	<select id="getMyCBT" resultType="map" >
		SELECT cbt_code as "cbtCode", cbt_title as "cbtTitle",
        class_title as "classTitle", name, final_date as "finalDate"
		FROM CBT_LIST c , NEW_CLASS n , CLASS_LIST l, PROFESSOR p
        WHERE c.open_class = n.open_class 
        and n.class_code = l.class_code
        and n.professor_code = p.professor_code
        and c.open_class in (
			SELECT open_class
			FROM CLASS_STATUS
			WHERE student_code = '2017000103'
		)
	</select>
	
</mapper>
